<!DOCTYPE html>
<html ng-app="app">
<head>
    <title>MPD All Access</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <script src="js/bundle.js"></script>
    <link type="text/css" rel="stylesheet" href="css/style.css">
    <link type="text/css" rel="stylesheet" href="css/angular-material.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <base href="/">
</head>
<body class="layout-column">

<div ng-controller="SearchController">

<md-toolbar class="search">
  <div class="md-toolbar-tools">
	<form id="search" ng-submit="search()">
	      <md-input-container class="md-block" flex-gt-xs>
            <input ng-model="query" select-on-click/>
          </md-input-container>
		<button type="submit"><i class="material-icons">search</i></button>
	</form>
  </div>
</md-toolbar>

<md-content md-scroll-y>

<h2 ng-show="artists.length">Artists</h2>
<div ng-show="artists.length" class="md-padding" layout="row" layout-wrap>
  <md-card ng-repeat="entry in artists = (entries | filter:{type:'2'}) | limitTo: 3" flex-gt-sm="30" flex-sm="45">
	<img ng-src="{{entry.artist.artistArtRef}}" class="md-card-image" alt="{{entry.artist.name}}" ng-click="artist(entry.artist.artistId)">
	<md-card-title ng-click="artist(entry.artist.artistId)">
	  <md-card-title-text>
		<span class="md-headline">{{entry.artist.name}}</span>
	  </md-card-title-text>
	</md-card-title>
  </md-card>
</div>

<h2 ng-show="albums.length">Albums</h2>
<div ng-show="albums.length" class="md-padding" layout="row" layout-wrap>
  <md-card class="album-card" ng-repeat="entry in albums = (entries | filter:{type:'3'}) | limitTo: 6" flex-gt-md="15" flex-md="20" flex-sm="30">
	<img ng-src="{{entry.album.albumArtRef}}" class="md-card-image" alt="{{entry.album.name}}" ng-click="album(entry.album.albumId)">
	<md-card-title ng-click="album(entry.album.albumId)">
	  <md-card-title-text>
		<span class="md-headline">{{entry.album.name}}</span>
		<span class="md-subhead">{{entry.album.albumArtist}}</span>
	  </md-card-title-text>
	</md-card-title>
	<md-card-actions layout="row" layout-align="end center">
	  <md-button ng-repeat="item in menuItems | filter:{ type: 'album' }" ng-click="load(entry.album[item.id], item.mode ,item.type)" class="md-icon-button" aria-label="item.name">
		<i class="material-icons" style="vertical-align:inherit;">{{item.icon}}</i>
	  </md-button>
	</md-card-actions>
  </md-card>
</div>

<div ng-show="tracks.length" class="md-padding" layout="column">
	<h2>Songs</h2>
	<section class="md-whiteframe-1dp">
	<table id="table" class="display" >
		<tbody>
			<tr id="{{entry.track.storeId}}" ng-repeat="entry in tracks = (entries | filter:{type:'1'})">
				<td style="display:none;">{{entry.track.score}}</td>
				<td><a href ng-click="artist(entry.track.artistId)">{{entry.track.artist}}</a></td>
				<td>{{entry.track.title}}<div><a href ng-click="album(entry.track.albumId)">{{entry.track.album}}</a>&nbsp;({{entry.track.year}})</div></td>
				<td style="width:1px;white-space:nowrap;">
				   <md-button hide-xs ng-repeat="item in menuItems | filter:{ type: 'track' }" ng-click="load(entry.track[item.id], item.mode ,item.type)" class="md-icon-button" aria-label="item.name">
					 <i class="material-icons" style="vertical-align:inherit;">{{item.icon}}</i>
				   </md-button>
					<md-menu>
					  <md-button aria-label="Open actions menu" class="md-icon-button" ng-click="$mdOpenMenu($event)" style="vertical-align:middle;">
						<i class="material-icons" style="vertical-align:inherit;">more_vert</i>
					  </md-button>
					  <md-menu-content width="4">
						<md-menu-item ng-repeat="item in menuItems">
						  <md-button ng-click="load(entry.track[item.id], item.mode ,item.type)" style="vertical-align:middle;">
							<i class="material-icons" style="vertical-align:inherit;">{{item.icon}}</i>
							{{item.name}}
						  </md-button>
						</md-menu-item>
					  </md-menu-content>
					</md-menu>
				</td>
			</tr>
		</tbody>
	</table>
	</section>
</div>

</md-content>

</div>

</body>
</html>
